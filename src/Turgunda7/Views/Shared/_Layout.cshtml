@{
    Turgunda7.Models.UserModel umodel = new Turgunda7.Models.UserModel(Context.Request);
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/css/Site.css")" rel="stylesheet" type="text/css" />
    @*<link rel="shortcut icon" href="~/favicon.ico" />
        <link rel="icon" sizes="16x16" href="~/favicon.ico">*@
    <link rel="shortcut icon" href="@Url.Content("~/favicon.ico")" type="image/x-icon">

    @*<script src="@Url.Content("~/js/jquery-1.5.1.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/js/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/js/modernizr-1.7.min.js")" type="text/javascript"></script>*@
    <script src="@Url.Content("~/js/jquery-1.10.2.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/js/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/js/modernizr-2.6.2.js")" type="text/javascript"></script>

    <script>
        // Создаём новый объект XMLHttpRequest, формируем запрос, дожидаемся ответа, размещаем ответ в элементе цели
            // Надо бы использовать encodeURIComponent(текст)

        function HttpAsk(method, url, data, target, position) {
            //alert('url='+url+' data=' + data);
            var xhr = new XMLHttpRequest();
            xhr.open(method, url, false);
            xhr.send(data);
            if (xhr.status !== 200) {
                alert(xhr.status + ': ' + xhr.statusText); // пример вывода: 404: Not Found
            } else {
                if (position === "before") {
                    var el = document.getElementById(target);
                    $(el).before(xhr.responseText);
                } else {
                    document.getElementById(target).innerHTML = xhr.responseText;
                }

            }
        }
    </script>
    <script type="text/jscript">
        function SubmitForm(u, eid, comm) {
            var data = u + '?' + comm + '&' + $('#frm_' + eid).serialize();
            //alert(data);
            //var html = $.ajax({
            //    //url: '~/Home/EditForm',
            //    //url: 'EditForm',
            //    url: u,
            //    async: false,
            //    type: 'POST',
            //    dataType: 'html',
            //    data: data
            //}).responseText;
            //$('#' + eid).html(html);
            HttpAsk('get', data, null, eid, 'replace');
            return false;
        }
        function KeyP(u, key, eid, comm) {
            //alert('code=' + key);
            if (key === 13) {
                SubmitForm(u, eid, comm);
                return false;
            } else {
                return true;
            }
        }
    </script>


</head>
<body>
    <table width="100%" border="0" style="margin-top:10px;">
        <tr valign="top">
            <td rowspan="2">
                <div style="width:120px;" align="center">
                    <a href="@Url.Content("~/Home/Index")"><img src="@Url.Content("~/images/logo1.jpg")" alt="Начало" style="border:0px;" /></a>
                </div>
            </td>
            <td>
                <div style="width:200px;">
                    <div><a href="@Url.Content("~/Home/Index")">Начало</a></div>
                    @if (umodel.IsInRole("user"))
    {
                <div><a href="@Url.Content("~/Home/Index?name=" + umodel.Uuser)">Моё</a></div>
}
                    @if (umodel.IsInRole("admin"))
    {
                @*<div><a href="@Url.Content("~/Home/LoadDb")">Загрузки</a></div>*@
                <div><a href="@Url.Content("~/Home/SystemConfiguration")">Управление конфигурацией</a></div>
                <div><a href="@Url.Content("~/Home/UserConfiguration")">Управление пользователями</a></div>
}
                </div>
            </td>
            <td width="100%"><h2 style="color:#5c87b2;padding: 0 0 0 0;">@SObjects.appname</h2></td>
            <td>
                <div style="width:100px; text-align:right;">
                    @*Html.Partial("_LoginPartial")*@
                    @if (umodel.Uuser != null)
                    {
                    <span>@umodel.Uuser @Html.ActionLink("вых.", "Logout", "Account", routeValues: null, htmlAttributes: new { id = "rrrrr" })</span>
                    }
                    else
                    {
                    <span>@Html.ActionLink("ред.", "Logon", "Account", routeValues: null, htmlAttributes: new { id = "registerLink" })</span>
                    }
                </div>
            </td>
        </tr>
        <tr valign="bottom">
            <td colspan="3">
                <!--input type="text" style="width:50px;" /-->
                <div style="vertical-align:bottom;">
                    @using (Html.BeginForm("Search", "Home", FormMethod.Post, new { style = "margin:0;" }))
                    {
                        @Html.TextBox("searchstring", null, new { style = "width:300px;" })


                        var variants = TurgundaCommon.ModelCommon.formats.Elements("record")
                            .Select(r => new SelectListItem()
                            {
                                Value = r.Attribute("type").Value,
                                Text = TurgundaCommon.ModelCommon.OntNames[r.Attribute("type").Value]
                            }).ToList();
                        variants.Insert(0, new SelectListItem() { Value = "", Text = "" });
                        @Html.DropDownList("type", variants, new { style = "font-size:small;" });



                        <input type="submit" value="искать" style="font-size:small;" />
                    }
                </div>
            </td>
        </tr>
        <tr valign="top">
            <td></td>
            <td colspan="3">
                @RenderBody()
            </td>
        </tr>
    </table>
    <div></div>
</body>
</html>
