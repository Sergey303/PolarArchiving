Я застрял на делании газет, это надо преодолеть. Буду планировать и протоколировать действия. 
Общая схема следующая:

Сначала я размещаю по заданным uri максимальное количество scanned/dz документов. 

Могут появиться дубли, как-то их устраняю. Причем могут быть документы с тем же идентификатором,
документы с теми же годом и номером (номерами), документы с одинаковыми uri.

Потом я смотрю какие pdf остались не использованными. Их как-то надо внедрить в базу данных. 

Потом придумаю что делать дальше. 

Начинаю с первого пункта. Пока только виртуальное размещение, т.е. вычисление характеристик файла
и uri.

### 20200520 11:14
В результате предыдущих мероприятий, число ненайденных файлов осталось 5. Для каждого из них я вижу
его прототип, установить соответствие можно вручную. Например, в документе имя записано какприложение 
'приложение №1' год 1995, а в файлах есть  
D:\FactographProjects\NVS\PDF_склеенные номера\1995\1995_приложение-1.pdf

Попробую выставить эти соотвествия, пока я в теме. 

Хоть и коряво, но получилось. Теперь все dz-документы имеют соответствующий pdf. Пока этот pdf 
находится где-то в директории NVS. Что еще надо бы сделать. 
1 Проверить, что все документы имеют уникальные идентификаторы
2 Проверить, что все файлы разные (по именам)
3 Проверить, что все uri разные

А потом еще надо будет заняться теми 631 pdf-документами, которые не попали в базу данных.

Проверять буду заводя словари {id, fname}, {fname, id}, {uri, id}.

### 20200521 11:12
После исправлений, осталось 8 наложений по именам pdf. Надо разобраться. 

  <document rdf:about="newspaper_28775">
    <name>2</name>
    <iisstore documenttype="scanned/dz" uri="iiss://newspaper@iis.nsk.su/0015/0137" />
    <from-date>1976</from-date>
  </document>
  <document rdf:about="newspaper adds_1105">
    <name>02</name>
    <from-date>1976</from-date>
    <iisstore documenttype="scanned/dz" uri="iiss://newspaper adds@iis.nsk.su/0001/0156" />
  </document>

Это несоответствие, к сожалению, надо убрать физически. Я в кассете "newspaper adds"
закомментирую запись и смежные записи.

Фазу проверки/обработки я завершил. Теперь надо убедиться в том, что все uri уникальные

Проверил. Теперь надо бы проверить какие pdf-файлы остались вне базы данных, но это можно будет
сделать позднее.

Следующий этап - переписывание pfd-файлов по местам, определенным uri. В принципе, это несложно,
но ответственно. 

В очередной раз я застрял  на том, что есть какая-то лишняя информация  "газетных" кассетах. Можно эту информацию "почикать", но хотелось бы сохранить "на всякий случай".

### 20200522 09:18
Пришлось звонить Алексею Фурсенко. Надо было узнать есть ли оригиналы сканов страниц. Он затруднился ответить определенно. Вроде есть. Но деталей он не помнит. 

В общем, что есть у меня и что можно и нужно сделать. Есть две кассеты имеющие отношение к газетам: 'newspaper' и 'newspaper adds'. Что есть в первой и что есть во второй?

В кассете 'newspaper' есть некоторый meta/newspaper_current.fog. Это содержательный файл, в нем находится база данных, содержащая документы типа scanned/dz. И папки, видимо группирующие документы. Но еще есть не имеющие смысла  
```
  <scanned-page rdf:about="newspaper_14859_1961_1_1">
    <page-number>1</page-number>
    <scanned-document rdf:resource="newspaper_14858_1961_1" />
    <photo-page rdf:resource="newspaper_0002_0685" />
  </scanned-page>
```
Здесь со сканированным документом, видимо номером газеты, сопоставляется фотография. Делается это (кажется) через отдельную базу данных originals/0014/0780.fog

Ссылка на эту база данных есть в начале мета документа. А сами фотки размещены в documents/medium/*.jpg

Нужны эти фотки ли нет - непонятно. Но они лишь в medium-размере, т.е. слишком мелкие.
Кроме того, части фоток там нет, посмотрю в базу данных. В базе 0780.fog их также нет... В общем, пока фотографии имеет смысл игнорировать. 

### 20200526 11:08
В общем, пришел к тому, что у меня уже было, что я вроде почти сделал - надо "оставить" кассеты в том состоянии, которое есть, и сделать новую кассету. Надеюсь какой-то прошлый код поможет мне в этом...

Итак, первых несколько этапов я вроде как прошел. Совсем крошечными изменениями я установил соответствие между scanned/dz документами и pdf-документами. Причем в документах базы данных есть еще и uri, так что месо расположения уже определено. 

### 20200528 12:54
Я попытался проверить использование документов, определенный в кассете 'newspaper adds'. Не нашел, хотя в воспоминаниях что-то такое было. В принципе, речь идет о 28 документах. Поскольку мне еще надо будет вводить около 660 документов (номеров газеты), то можно о них пока не беспокоиться. 

Итак, начинаю формировать новую кассету, перерабатывая только newspaper. Для надежности, кассету назову также и, в основном, буду действовать способом выкидывания. 

